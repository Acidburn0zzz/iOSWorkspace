
5. 策略模式
    策略模式：定义一系列的算法，把每一个算法封装起来，并且使它们可相互替换。本模式使得算法可独立于使用它的客户而变化。也称为政策模式 (Policy)。
    策略模式把对象本身和运算规则区分开来，其功能非常强大，因为这个设计模式本身的核心思想就是面向对象编程的多形性的思想。
    敏捷原则：接口隔离原则；多用组合，少用继承；针对接口编程，而非实现。
注意事项：
    [1]. 剥离类中易于变化的行为，通过组合的方式嵌入抽象基类
    [2]. 变化的行为抽象基类为，所有可变变化的父类
    [3]. 用户类的最终实例，通过注入行为实例的方式，设定易变行为，防止了继承行为方式，导致无关行为污染子类。完成了策略封装和可替换性。

5.1	适用场景
    [1]. 许多相关的类仅仅是行为有异。“策略”提供了一种用多个行为中的一个行为来配置一个类的方法。即一个系统需要动态地在几种算法中选择一种。
    [2]. 需要使用一个算法的不同变体。例如，定义一些反映不同的空间/时间权衡的算法。当这些变体实现为一个算法的类层次时，可以使用策略模式。
    [3]. 算法使用客户不应该知道的数据。可使用策略模式以避免暴露复杂的、与算法相关的数据结构。
    [4]. 一个类定义了多种行为，并且这些行为在这个类的操作中以多个条件语句的形式出现。将相关的条件分支移入它们各自的Strategy类中以代替这些条件语句。

5.2	优缺点分析
5.2.1 优点
    [1]. 相关算法系列
        Strategy类层次为Context定义了一系列的可供重用的算法或行为。继承有助于析取出这些算法中的公共功能。
    [2]. 提供了可以替换继承关系的办法
        继承提供了另一种支持多种算法或行为的方法。可以直接生成一个Context类的子类，从而给它以不同的行为。但这会将行为硬行编制到Context中，而将算法的实现与Context的实现混合起来，从而使Context难以理解、难以维护和难以扩展，而且还不能动态地改变算法。最后得到一堆相关的类，它们之间的唯一差别是它们所使用的算法或行为。将算法封装在独立的Strategy类中使得你可以独立于其Context改变它，使它易于切换、易于理解、易于扩展。
    [3]. 消除了一些if else条件语句
        Strategy模式提供了用条件语句选择所需的行为以外的另一种选择。当不同的行为堆砌在一个类中时，很难避免使用条件语句来选择合适的行为。将行为封装在一个个独立的Strategy类中消除了这些条件语句。含有许多条件语句的代码通常意味着需要使用Strategy模式。
    [4]. 实现的选择 
        Strategy模式可以提供相同行为的不同实现。客户可以根据不同时间/空间权衡取舍要求从不同策略中进行选择。
5.2.2 缺点
    [1]. 客户端必须知道所有的策略类，并自行决定使用哪一个策略类
        客户要选择一个合适的Strategy就必须知道各Strategy的不同。此时可能不得不向客户暴露具体的实现问题。因此仅当这些不同行为变体与客户相关的行为时，才需要使用Strategy模式。
    [2]. Strategy和Context之间的通信开销
        无论各Strategy实现的算法是简单还是复杂，它们都共享Strategy定义的接口。有时，某Strategy不会用到接口传入的全部信息，这使得有时Context会创建和初始化一些永远不会用到的参数。如果存在这样问题，那么将需要在Strategy和Context之间更进行紧密的耦合。
    [3]. 策略模式将造成产生很多策略类
        可以通过使用享元模式在一定程度上减少对象的数量。增加了对象的数目Strategy增加了一个应用中的对象的数目。有时你可以将 Strategy实现为可供各Context共享的无状态的对象来减少这一开销。任何其余的状态都由 Context维护。Context在每一次对Strategy对象的请求中都将这个状态传递过去。共享的 Strategy不应在各次调用之间维护状态。

5.3	案例分析
5.3.1 案例
    在验证用户输入的表单的时候，加入包括电话输入框的验证和邮件输入框的验证，这两部分的验证算法是不同的，如果把这个算法看成一个函数，他几乎有相同的输入参数和返回参数。
5.3.2 策略
    [1]. 把公共函数抽象为基类(InputValidator)的一个方法(bool validateInput(input,error))
    [2]. 抽象出两个具体的策略类：电话验证类(PhoneValidator)和邮件验证类(EmailValidator)。策略类在各自的实现里面去复写父类的验证方法。

5.4 Reference
    iOS设计模式 - (4)策略模式：http://blog.csdn.net/hitwhylz/article/details/40583525

